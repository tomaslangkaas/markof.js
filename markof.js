(function(b,a){"function"===typeof define&&define.amd?define(a):"object"===typeof exports?module.exports=a:b.markof=a()})(this,function(){function G(a){return"&#"+a.charCodeAt(0)+";"}function h(a){return a.replace(v,G)}function w(a){return x.slice(0,a+1)}function y(){return""}function z(a,b){return"<"+a+">"+b+"</"+a+">"}function r(a){for(var b="";d.length>a;)b+=m(d.length-1)+"</"+d.pop()+">";return b}function n(a,b,e){e|=0;return r(e)+m(e)+"<"+(d[e]=a)+(b||"")+">"}function A(a,b,e,c,h){var g="";if(d[c-1]!=a||b)g+=n(a,0,c-1);return g+=n(e,h,c)}function I(a){return n(0>";,'".indexOf(a)?"td":"th",a&&' style="text-align:'+(0>",.".indexOf(a)?0>";:".indexOf(a)?"left":"center":"right")+';"',2)}function B(a,b,e,k,H,g,v,l,w,C,x,J,y,B,F,N,O,K,f,P,Q,t,D,L,R,S,T,M){return l?(l=l.split("\n").length-2,f=f?' id="'+f+'"':"",(C?A(c[C]||"ol",l,"li",(w||"").length+1,c[C]?f:f+' value="'+x+'"'):J?n("h"+J.length,f):y?n("blockquote",f):B?r(0)+"\n"+z("pre",z("code",h(F.replace(/\\`/g,"`")))):K?A("dl",l,c[K]||"dd",1,f):N?A("table",l,"tr",1,f)+I(O):l||!d.length?n("p",f):"<br>")+m(d.length)):P&&"table"==d[0]?I(Q)+m(3):t?((E[t]^=1)?"<":"</")+c[t]+">":D?c[D]||G(D):M?z("code",h(M.replace(/\\`/g,"`"))):L?(S?'<img alt="'+h(T)+'" src="':(u=1,'<a href="'))+L+'" title="'+h(R)+'">':e?u?(u=0,"</a>"):"]":b?h(b):H?(k?r(0)+m(0):"")+(p.hasOwnProperty(g)?p[g].call?p[g](v):p[g]:H):a}function k(a,b){d=[];E={};p=b||{};u=0;return("\n\n"+a).replace(/\s*$/,"").replace(F,B).slice(1)+r(0)}var v=/[<>&\"\'\/]/g,c={_:"sub","^":"sup","~":"small","*":"em","!!":"strong","++":"ins","==":"del","-":"ul",":":"dt","--":"&ndash;","---":"&mdash;","...":"&hellip;","'":"&rsquo;"},F=/&\w*;|&#x?[\da-fA-F]*;|\\([\'\"\*!~\^_`\+\-=\.<>#\|\:\[])|(\])|(\s*\n)?(\{\{([^\}\s]*)\s?((?:\\\}|[^\}])*)\}\})|(\s*\n)(?:( *)(\-|(\d+)\.)|(#{1,6})|(\")|(```).*\n((?:[^\n]|\n[^`])*)\n```.*|(\|([\:;\.\,\'])?)|(\:\:?))?(?:\[#([\w_]*)\])? *|( *\|([\:;\.\,\'])? *)|([_\^~\*]|!!|==|\+\+)|(<<|>>|``|\'\'|[<>&\"\'\/]|\-{2,3}|\.{3})|\{((?:#|https?|mailto|\.)[\!#\$&\=\]_~\(-;\?-\[a-z]*) ?([^\}]*)\}\[(\!([^\]]*)\])?|`((?:\\`|[^`])*)`/g,E={},d=[],x="\n"+Array(99).join(" "),m,p,u;(k.quotes=function(a,b,e,d){c["<<"]=a||"&ldquo;";c[">>"]=b||"&rdquo;";c["``"]=e||"&lsquo;";c["''"]=d||"&rsquo;";return k})();(k.compact=function(a){m=a?y:w;return k})();k.safe=h;return k});
