(function(b,a){"function"===typeof define&&define.amd?define(a):"object"===typeof exports?module.exports=a:b.markof=a()})(this,function(){function G(a){return"&#"+a.charCodeAt(0)+";"}function d(a){return a.replace(v,G)}function w(a){return x.slice(0,a+1)}function y(){return""}function z(a,b){return"<"+a+">"+b+"</"+a+">"}function r(a){for(var b="";g.length>a;)b+=l(g.length-1)+"</"+g.pop()+">";return b}function n(a,b,e){e|=0;return r(e)+l(e)+"<"+(g[e]=a)+(b||"")+">"}function A(a,b,e,c,d){var h="";if(g[c-1]!=a||b)h+=n(a,0,c-1);return h+=n(e,d,c)}function I(a){return n(0>";,'".indexOf(a)?"td":"th",a&&' style="text-align:'+(0>",.".indexOf(a)?0>";:".indexOf(a)?"left":"center":"right")+';"',2)}function B(a,b,e,k,H,h,v,m,w,C,x,J,y,B,F,P,Q,K,L,M,R,S,t,D,N,T,U,V,O,f){return m?(m=m.split("\n").length-2,f=(L?' id="'+L+'"':"")+(M?' class="'+M+'"':""),(C?A(c[C]||"ol",m,"li",(w||"").length+1,c[C]?f:f+' value="'+x+'"'):J?n("h"+J.length,f):y?n("blockquote",f):B?r(0)+l(0)+z("pre",z("code",d(F.replace(/\\`/g,"`")))):K?A("dl",m,c[K]||"dd",1,f):P?A("table",m,"tr",1,f)+I(Q):m||!g.length?n("p",f):"<br>")+l(g.length)):R&&"table"==g[0]?I(S)+l(3):t?((E[t]^=1)?"<":"</")+c[t]+">":D?c[D]||G(D):O?z("code",d(O.replace(/\\`/g,"`"))):N?(U?'<img alt="'+d(V)+'" src="':(u=1,'<a href="'))+N+'" title="'+d(T)+'">':e?u?(u=0,"</a>"):"]":b?d(b):H?(k?r(0)+l(0):"")+(p.hasOwnProperty(h)?p[h].call?(f=p[h](v),void 0==f?"":f):p[h]:d(H)):a}function k(a,b){g=[];E={};p=b||{};u=0;return("\n\n"+a).replace(/\s*$/,"").replace(F,B).slice(1)+r(0)}var v=/[<>&\"\'\/]/g,c={_:"sub","^":"sup","~":"small","*":"em","!!":"strong","++":"ins","==":"del","-":"ul",":":"dt","--":"&ndash;","---":"&mdash;","...":"&hellip;","'":"&rsquo;"},F=/&\w*;|&#x?[\da-fA-F]*;|\\([\'\"\*!~\^_`\+\-=\.<>#\|\:\[])|(\])|(\s*\n)?(\{\{([^\}\s]*)\s?((?:\\\}|[^\}])*)\}\})|(\s*\n)(?:( *)(\-|(\d+)\.)|(#{1,6})|(\")|(```).*\n((?:[^\n]|\n[^`])*)\n```.*|(\|([\:;\.\,\'])?)|(\:\:?))?(?:\[(?:#([\w_]*))?(?:\.([\w ]*))?\])? *|( *\|([\:;\.\,\'])? *)|([_\^~\*]|!!|==|\+\+)|(<<|>>|``|\'\'|[<>&\"\'\/]|\-{2,3}|\.{3})|\{((?:#|https?|mailto|\.)[\!#\$&\=\]_~\(-;\?-\[a-z]*) ?([^\}]*)\}\[(\!([^\]]*)\])?|`((?:\\`|[^`])*)`/g,E={},g=[],x="\n"+Array(99).join(" "),l,p,u;(k.quotes=function(a,b,e,d){c["<<"]=a||"&ldquo;";c[">>"]=b||"&rdquo;";c["``"]=e||"&lsquo;";c["''"]=d||"&rsquo;";return k})();(k.compact=function(a){l=a?y:w;return k})();k.safe=d;return k};);
