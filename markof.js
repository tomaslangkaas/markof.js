(function(b,a){"function"===typeof define&&define.amd?define(a):"object"===typeof exports?module.exports=a:b.markof=a()})(this,function(){function H(a){return"&#"+a.charCodeAt(0)+";"}function d(a){return a.replace(w,H)}function x(a){return y.slice(0,a+1)}function z(){return""}function A(a,b){return"<"+a+">"+b+"</"+a+">"}function t(a){for(var b="";g.length>a;)b+=l(g.length-1)+"</"+g.pop()+">";return b}function n(a,b,e){e|=0;return t(e)+l(e)+"<"+(g[e]=a)+(b||"")+">"}function B(a,b,e,c,d){var h="";if(g[c-1]!=a||b)h+=n(a,0,c-1);return h+=n(e,d,c)}function I(a){return n(0>";,'".indexOf(a)?"td":"th",a&&' style="text-align:'+(0>",.".indexOf(a)?0>";:".indexOf(a)?"left":"center":"right")+';"',2)}function C(a,b,e,k,r,h,w,m,x,D,y,J,z,C,G,P,Q,K,L,M,R,S,u,E,N,T,U,V,O,f){return m?(m=m.split("\n").length-2,f=(L?' id="'+L+'"':"")+(M?' class="'+M+'"':""),(D?B(c[D]||"ol",m,"li",(x||"").length+1,c[D]?f:f+' value="'+y+'"'):J?n("h"+J.length,f):z?n("blockquote",f):C?t(0)+l(0)+A("pre",A("code",d(G.replace(/\\`/g,"`")))):K?B("dl",m,c[K]||"dd",1,f):P?B("table",m,"tr",1,f)+I(Q):m||!g.length?n("p",f):"<br>")+l(g.length)):R&&"table"==g[0]?I(S)+l(3):u?((F[u]^=1)?"<":"</")+c[u]+">":E?c[E]||H(E):O?A("code",d(O.replace(/\\`/g,"`"))):N?(U?'<img alt="'+d(V)+'" src="':(v=1,'<a href="'))+N+'" title="'+d(T)+'">':e?v?(v=0,"</a>"):"]":b?d(b):r?(k?t(0)+l(0):"")+(p.hasOwnProperty(h)?p[h].call?(f=p[h](w),void 0==f?"":f):p[h]:d(r)):a}function k(a,b){g=[];F={};p=b||{};v=0;return("\n\n"+a).replace(/\s*$/,"").replace(G,C).slice(r?1:0)+t(0)}var w=/[<>&\"\'\/]/g,c={_:"sub","^":"sup","~":"small","*":"em","!!":"strong","++":"ins","==":"del","-":"ul",":":"dt","--":"&ndash;","---":"&mdash;","...":"&hellip;","'":"&rsquo;"},G=/&\w*;|&#x?[\da-fA-F]*;|\\([\'\"\*!~\^_`\+\-=\.<>#\|\:\[])|(\])|(\s*\n)?(\{\{([^\}\s]*)\s?((?:\\\}|[^\}])*)\}\})|(\s*\n)(?:( *)(\-|(\d+)\.)|(#{1,6})|(\")|(```).*\n((?:[^\n]|\n[^`])*)\n```.*|(\|([\:;\.\,\'])?)|(\:\:?))?(?:\[(?:#([\w_]*))?(?:\.([\w ]*))?\])? *|( *\|([\:;\.\,\'])? *)|([_\^~\*]|!!|==|\+\+)|(<<|>>|``|\'\'|[<>&\"\'\/]|\-{2,3}|\.{3})|\{((?:#|https?|mailto|\.)[\!#\$&\=\]_~\(-;\?-\[a-z]*) ?([^\}]*)\}\[(\!([^\]]*)\])?|`((?:\\`|[^`])*)`/g,F={},g=[],y="\n"+Array(99).join(" "),l,p,v,r;(k.quotes=function(a,b,e,d){c["<<"]=a||"&ldquo;";c[">>"]=b||"&rdquo;";c["``"]=e||"&lsquo;";c["''"]=d||"&rsquo;";return k})();(k.compact=function(a){l=(r=a)?z:x;return k})();k.safe=d;return k});
